services:
  # Google BigQuery emulator
  bigquery:
    image: ghcr.io/goccy/bigquery-emulator:0.4.4
    volumes:
      - ./data:/data
    ports:
      - 9050:9050
    command:
      [
        "./bigquery-emulator",
        "--project=test",
        "--data-from-yaml=/data/bigquery.yaml",
      ]
  # Postgres instance with pgvector extension
  postgres:
    image: ankane/pgvector:v0.4.1
    ports:
      - 5432:5432
    environment:
      POSTGRES_USER: postgres
      POSTGRES_HOST_AUTH_METHOD: trust

